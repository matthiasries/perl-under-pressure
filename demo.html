<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta name="generator" content="HTML Tidy for Linux (vers 25 March 2009), see www.w3.org">
<title>"Perlito" Perl5 Compiler + CodeMirror</title>
<link rel="stylesheet" href="css/docs.css" type="text/css">
<link rel="stylesheet" href="css/codemirror.css" type="text/css">
<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="css/bootstrap-theme.min.css" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js" type="text/javascript">
</script>
<script src="js/codemirror.js" type="text/javascript">
</script>
<script src="js/perl.js" type="text/javascript">
</script>
<style type="text/css">
.CodeMirror { 
font-family: Inconsolata;
font-size: 20px;
width:100%;
}
.table table-condensed {
width:100%;
height:2em;
padding: 1px;
border: 0px;
}
</style>

<script type="text/javascript" src="js/perlito5.js">
</script>
</head>
<body>
<div class="navbar navbar-default navbar-static-top" role="navigation">
 <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Perl5 under pressure</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Options <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#">Plain old perl</a></li>
                <li><a href="#">Perl5i</a></li>
                <li><a href="#">Moose</a></li>
                <li><a href="#">Perl5-Mop (Redux)</a></li>
                <li class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#socialstuff"><img class=".glyphicon-share"></a></li>
            <li><a href="#donate" ><img class".glyphicon-usd"/></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
</div>
<div class="container"> </div>
<div class="container"> <p id="mission">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec a diam lectus. Sed sit amet ipsum mauris. Maecenas congue ligula ac quam viverra nec consectetur ante hendrerit. Donec et mollis dolor. Praesent et diam eget libero egestas mattis sit amet vitae augue. Nam tincidunt congue enim, ut porta lorem lacinia consectetur. Donec ut libero sed arcu vehicula ultricies a non tortor. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean ut gravida lorem. Ut turpis felis, pulvinar a semper sed, adipiscing id dolor. Pellentesque auctor nisi id magna consequat sagittis. Curabitur dapibus enim sit amet elit pharetra tincidunt feugiat nisl imperdiet. Ut convallis libero in urna ultrices accumsan. Donec sed odio eros. Donec viverra mi quis quam pulvinar at malesuada arcu rhoncus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. In rutrum accumsan ultricies. Mauris vitae nisi at sem facilisis semper ac in est.</p>
<form>
<div class="row">
<div class="col-lg-11">
<div class="panel panel-primary">
   <div class="panel-body">
<textarea class="form-control" id="source" name="source" cols="100" rows="10">
# returnes the doubled value of an integer.
#  @param one int number
#  @return int or undef
sub doubleInteger {
		





}

</textarea>
</div>
</div>

<div class="row" style="margin-top:25px;">
<div class="col-lg-1">
<input type="button" class="btn btn-primary btn-lg" value="Go" onclick="execute()">
</div>
<div class="col-lg-11">
<div class="panel panel-primary">
   <div class="panel-heading">Output</div>
   <div class="panel-body">
	<table class="table table-condensed" id="print-result2"></table>
      </textarea>
   </div>
</div>
</div>
<div class="row" id="debug-log" >
<textarea class="form-control" id="testcase" name="testcase" cols="120" rows="5">
if ( doubleInteger(1) == 2){say "Test1: ok" }else{warn "Fehler Test1"};
if ( not defined(doubleInteger(a))){say "Test2: ok" }else{say "Fehler Test2"};
if ( doubleInteger(100) == 200 ){say "Test3: ok" }else{say "Fehler Test3"};
if ( not defined( doubleInteger(0.00001)) ){say "Test4: ok" }else{say "Fehler Test4"};
if ( not defined( doubleInteger([1,2]) )){say "Test5: ok" }else{say "Fehler Test5"};
if ( not defined( doubleInteger("1a")  )){say "Test6: ok" }else{say "Fehler Test6"};
</textarea>
<br></form>
<p>Compiler log:</p>
<textarea class="form-control" id="log-result" readonly="true" cols="120" rows="8">
</textarea>
<br>
<p>Compiled to Javascript:</p>
<textarea class="form-control" id="js-result" readonly="true" cols="120" rows="8">
</textarea>
<br>
<p>Output:</p>
<textarea class="form-control" id="print-result" readonly="true" cols="120" rows="8">
</textarea>
<br></div>
<br>
</div>
</div>
<script type="text/javascript">
      var editor = CodeMirror.fromTextArea(document.getElementById("source"), {
        lineNumbers: true
      });
</script><script type="text/javascript">

         function execute() {
            editor.save();          
            p5pkg.CORE.print = function(List__) {
                var i;
                for (i = 0; i < List__.length; i++) {
			    var line = p5str(List__[i]);
	document.getElementById('print-result').value += line
	if (line != '\n') document.getElementById('print-result2').innerHTML += '<tr><td>'+line+'</td></tr>';
                }
                return true;
            };
            p5pkg.CORE.warn = function(List__) {
                var i;
                List__.push("\n");
                for (i = 0; i < List__.length; i++) {
			    var line = p5str(List__[i]);
		if (line != '\n') document.getElementById('print-result2').innerHTML += '<tr class="danger"><td>'+line+'</td></tr>';
                            document.getElementById('log-result').value += line;
                }
                return true;
            };
            p5pkg["main"]["v_^O"] = "browser";
            p5pkg["main"]["Hash_INC"]["Perlito5/strict.pm"] = "Perlito5/strict.pm";
            p5pkg["main"]["Hash_INC"]["Perlito5/warnings.pm"] = "Perlito5/warnings.pm";

            var source  = document.getElementById('source').value   + "\n";
                source += document.getElementById('testcase').value + "\n";
            var pos = 0;
            var ast;
            var match;
                        document.getElementById('log-result').value   = "";
                        document.getElementById('js-result').value    = "";
                    document.getElementById('print-result').value = "";
                    document.getElementById('print-result2').innerHTML  = "";
		i// document.getElementById('debug-log').style.display = 'none'
            try {
                // compile
                            document.getElementById('log-result').value += "Compiling.\n";
                var start = new Date().getTime();
                var js_source = p5pkg["Perlito5"].compile_p5_to_js([source]);
                var end = new Date().getTime();
                var time = end - start;
                            document.getElementById('log-result').value +=  "Compilation time: " + time + "ms\n";
                    document.getElementById('js-result').value  += js_source + ";\n";

                // run
                start = new Date().getTime();
                        eval(js_source);
                end = new Date().getTime();
                time = end - start;
                            document.getElementById('log-result').value += "Running time: " + time + "ms\n";
                p5pkg.CORE.print(["\nDone.\n"]);
            }
            catch(err) {
		document.getElementById('debug-log').style.display = '';
                document.getElementById('log-result').value += "Error:\n";
                document.getElementById('log-result').value += err + "\n";
                document.getElementById('log-result').value += "Compilation aborted.\n";
            }
                }
</script>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="http://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="http://code.jquery.com/js/bootstrap.min.js"></script>
</body>
</html>
